<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd">

    <changeSet id="PICK-5:createItemAndItemTypeTestData" author="RobinGuth" context="testdata">
        <preConditions onFail="HALT">
            <sequenceExists sequenceName="item_seq" />
            <sequenceExists sequenceName="item_type_seq" />
            <tableExists tableName="items"/>
            <tableExists tableName="item_types"/>
        </preConditions>

        <sql dbms="postgresql" splitStatements="true">
            INSERT INTO item_types VALUES(nextval('item_type_seq'), 'Small Speaker', 'Small 8 Ohm Speaker');

            INSERT INTO items VALUES(nextval('item_seq'), 'IN_STOCK', 'USED', 'Salvaged Speaker', currval('item_type_seq'));
            INSERT INTO items VALUES(nextval('item_seq'), 'IN_STOCK', 'USED', 'Salvaged Speaker', currval('item_type_seq'));
            INSERT INTO items VALUES(nextval('item_seq'), 'IN_STOCK', 'USED', 'Salvaged Speaker', currval('item_type_seq'));

            INSERT INTO item_types VALUES(nextval('item_type_seq'), 'Small Motor', 'A small motor');

            INSERT INTO item_types VALUES(nextval('item_type_seq'), 'Resistor 220 Ohm', 'A 1/4 W Resistor with 220 Ohm');

            INSERT INTO items VALUES(nextval('item_seq'), 'NEEDED', 'NEW', 'Some notes about this item', currval('item_type_seq'));
            INSERT INTO items VALUES(nextval('item_seq'), 'NEEDED', 'NEW', 'Some notes about this item', currval('item_type_seq'));
            INSERT INTO items VALUES(nextval('item_seq'), 'NEEDED', 'NEW', 'Some notes about this item', currval('item_type_seq'));
            INSERT INTO items VALUES(nextval('item_seq'), 'NEEDED', 'NEW', 'Some notes about this item', currval('item_type_seq'));
        </sql>
    </changeSet>

    <changeSet id="PICK-5:createGroupAndProjectTestData" author="RobinGuth" context="testdata">
        <preConditions onFail="HALT">
            <sequenceExists sequenceName="group_seq" />
            <sequenceExists sequenceName="project_seq" />
            <tableExists tableName="groups"/>
            <tableExists tableName="projects"/>
        </preConditions>

        <sql dbms="postgresql" splitStatements="true">
            INSERT INTO groups values (nextval('group_seq'), 'First group', null);

            INSERT INTO groups values (nextval('group_seq'),'Second group', null);
            INSERT INTO projects VALUES(nextval('project_seq'), 'Awesome first project', null, currval('group_seq'));
            INSERT INTO projects VALUES(nextval('project_seq'), 'Fourth project', null, currval('group_seq'));

            INSERT INTO groups values (nextval('group_seq'), 'Third group', null);
            INSERT INTO projects VALUES(nextval('project_seq'), 'Awesome second project', null, currval('group_seq'));

            INSERT INTO projects VALUES(nextval('project_seq'), 'Third project', null, null);
        </sql>
    </changeSet>

</databaseChangeLog>